AI 개발 컨텍스트: console.design4public.com CMS이 문서는 console.design4public.com 콘텐츠 관리 시스템(CMS) 개발을 위한 모든 요구사항과 가이드라인을 정의합니다. AI는 이 문서를 기반으로 프로젝트를 이해하고 코드를 생성해야 합니다.1. 프로젝트 개요프로젝트명: console.design4public.com목표: design4public.com 메인 사이트에 사용될 '공공 조달 가구 납품 사례' 콘텐츠를 운영자가 효율적으로 관리(CRUD)할 수 있는 웹 기반 CMS를 구축한다.2. 핵심 제약사항 및 결정사항2.1. 기술 스택 (Mandatory)Frontend: Next.js, TypeScriptBackend & Services: Supabase (PostgreSQL, Authentication, Storage)Deployment: VercelVersion Control: Github2.2. 디자인 시스템 (Mandatory)UI 라이브러리: @shopify/polaris원칙: 모든 UI 컴포넌트, 레이아웃, 아이콘, 색상, 타이포그래피는 반드시 Shopify Polaris 디자인 시스템의 규칙과 컴포넌트를 사용하여 구현해야 한다. 별도의 커스텀 CSS는 최소화하고 Polaris의 디자인 철학을 따른다.3. 사용자 인증 및 역할3.1. 인증 흐름회원가입: 사용자는 이메일/비밀번호로 가입한다.이메일 인증: Supabase Auth의 이메일 인증 절차를 완료해야 한다.관리자 승인: 이메일 인증 후, 계정은 pending 상태가 된다. 마스터(master) 관리자가 사용자 관리 페이지에서 해당 계정을 approved로 변경해야 최종 로그인이 가능하다.3.2. 사용자 역할 및 권한역할 (Role)설명권한 (Permissions)master최고 관리자모든 콘텐츠 CRUD, 사용자 관리 (승인, 역할 변경, 삭제)admin일반 관리자사용자 관리를 제외한 모든 콘텐츠 CRUDgeneral일반 사용자콘텐츠 생성(Create) 및 수정(Update)만 가능4. 데이터베이스 스키마 (Supabase PostgreSQL)4.1. profilesauth.users와 1:1 연결. 역할 및 계정 상태 관리.id (uuid, PK, FK to auth.users.id)email (text, Not Null)role (text, Not Null, master/admin/general)status (text, Not Null, pending/approved/rejected)4.2. projectsid (uuid, PK), title (text, Not Null), description (text), cover_image_url (text), year (integer), area (numeric), status (text, Not Null, draft/published/hidden), created_at (timestamptz)4.3. itemsid (uuid, PK), name (text, Not Null), description (text), brand_id (uuid, FK to brands.id), nara_url (text), image_url (text)4.4. brandsid (uuid, PK), name (text, Not Null, Unique), description (text), cover_image_url (text), website_url (text)4.5. tagsid (uuid, PK), name (text, Not Null, Unique)4.6. project_imagesid (uuid, PK), project_id (uuid, FK to projects.id), image_url (text, Not Null), order (integer)4.7. Junction Tables (N:M)project_items: project_id, item_idproject_tags: project_id, tag_idimage_tags: image_id (FK to project_images.id), tag_id5. 애플리케이션 구조 및 UI (Polaris 기반)5.1. 공통 레이아웃랜딩 페이지: 로그인 후, 사용자는 /projects (프로젝트 목록) 페이지로 이동한다. 별도의 대시보드 페이지는 없다.GNB (사이드 네비게이션):Polaris Navigation 컴포넌트를 사용하여 구현한다.각 메뉴명 옆에는 해당 데이터의 총 개수를 나타내는 Polaris Badge 컴포넌트가 반드시 표시되어야 한다.메뉴 구성:프로젝트아이템브랜드태그사용자 ('master' 역할에게만 보임)5.2. 페이지별 기능프로젝트 관리 (/projects):리스트 뷰: IndexTable 컴포넌트로 목록 표시. Filters 컴포넌트로 검색/필터 기능 구현.입력/상세 뷰: FormLayout 기반. TextField, DropZone 등 사용. 각 갤러리 이미지별 태그 입력 UI 필요.아이템 관리 (/items):리스트 뷰: IndexTable 사용.입력/상세 뷰: 브랜드 선택은 Select 또는 Autocomplete 컴포넌트 사용.브랜드/태그 관리 (/brands, /tags):IndexTable과 FormLayout을 사용한 표준 CRUD 인터페이스.사용자 관리 (/users) (master 전용):IndexTable로 사용자 목록 표시. Badge로 역할/상태 표시.계정 상태 및 역할 변경 기능은 Select 컴포넌트를 활용.6. 개발 가이드라인6.1. 폴더 구조src/
├── app/                  # 페이지 라우팅 (App Router)
├── components/           # 재사용 UI 컴포넌트
├── lib/                  # 라이브러리, 클라이언트 설정
├── services/             # 데이터베이스 통신 로직
└── types/                # TypeScript 타입 정의
6.2. 데이터 로직 분리원칙: UI 컴포넌트(페이지, 컴포넌트 등)에서 직접 Supabase 클라이언트를 호출하지 않는다.구현: 모든 데이터베이스 통신은 src/services/ 디렉토리 내의 서비스 함수(예: getProjects, createProject)를 통해 이루어져야 한다. 이는 코드의 재사용성을 높이고, UI와 데이터 로직을 명확하게 분리하여 유지보수를 용이하게 한다.6.3. TypeScript 활용원칙: Supabase CLI를 사용하여 데이터베이스 스키마로부터 타입 정의 파일(database.ts)을 자동 생성하고, 이를 프로젝트 전반에 적극적으로 활용하여 타입 안정성을 확보한다.명령어 예시: npx supabase gen types typescript --project-id <YOUR_PROJECT_ID> > src/types/database.ts활용: API 응답, 함수 인자/반환값 등 모든 데이터 관련 로직에 생성된 타입을 적용하여 개발 단계에서 오류를 사전에 방지한다.6.4. 개발 프로세스방식: 기능 단위 수직 개발 (Vertical Slice Development)설명: UI(프론트엔드)와 API(백엔드)를 분리하여 개발하지 않고, 하나의 완전한 기능(예: '프로젝트 목록 조회', '프로젝트 생성')을 단위로 개발을 완료한다. 각 기능은 UI, 데이터 로직, API 연동을 모두 포함하여 실제 동작 가능한 상태로 개발하는 것을 목표로 한다.